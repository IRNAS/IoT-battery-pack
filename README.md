![irnas_logo](https://github.com/IRNAS/IoT-battery-pack/blob/modular/Pics/irnas_logo.png)

# PiRA - Power in Responsive Applications (IoT battery pack - modular)

This repository contains the design of [PiRA](http://irnas.eu/pira), a modular IoT battery pack based on the integrated version developed for [Safecst Solarcast](https://github.com/IRNAS/Solarcast) sensor device. It is an open source universal solution for solar powered IoT devices implementing all commonly required features:

1. charging,
2. battery monitoring,
3. voltage regulation,
4. power scheduling,
5. battery protection,
6. standard LiPo cell usage,
7. optional on board processor.

This battery pack solution was designed to reduce the development time and costs of bringing IoT devices from idea to functional prototypes.

![IoT modular](https://github.com/IRNAS/IoT-battery-pack/blob/cab1c61998379034fc300a245bfd4489ad2a6266/Pics/iot-battery-pack-1.jpg?raw=true)
![IoT modular](https://raw.githubusercontent.com/IRNAS/IoT-battery-pack/cab1c61998379034fc300a245bfd4489ad2a6266/Pics/iot-battery-pack-2.jpg)
![IoT modular](https://github.com/IRNAS/IoT-battery-pack/blob/modular/Pics/modular-iot-battery-pack.png?raw=true)

## GENERAL DESCRIPTION

IoT battery pack is an universal solution for solar powered IoT projects implementing all commonly required features, such as charging, battery monitoring and voltage regulations, to solve these repeating requirements for a number of projects, creating a cost and convenience benefit for developers and manufacturers of IoT systems. Due to the modular structure one can either use this as a set of modules to be included in the target application or simply pack a mother board with a number of modules required for a particular system.

![IoT modular](https://github.com/IRNAS/IoT-battery-pack/blob/modular/Pics/IoT-battery-pack-modular.png)

The system is broken down into standalone modules one can combine in a number of ways.

## Charging modules
Charging modules provide the interface between a power source and the single cell battery.

 * USB charger: Designed to charge via a standard microUSB: 5V/2A
   * auto-disconnect when not plugged in
 * Solar charger: Designed to charge from a solar cell with MPPT : 4.95-32V IN / 2A charging [LT3652](http://www.linear.com/product/LT3652)
   * protection diode for panel
   * adjustable MPPT point

## Output modules
Providing useful output for various applications.

 * Fixed regulator: 3.3V/2A or 5V/1.5A
   * External enable OR Under-voltage OR allways-on
 * Adjustable regulator: 3-5V/1.5A
   * External enable OR Under-voltage OR allways-on
 * High-side switched battery output: 2A+
 * Higher voltage regulator: 24V/300mA
   * adjustable voltage

## Battery modules
Interfacing the battery to the rest of the circuitry.

 * Battery protection module:
   * Over-voltage
   * Under-voltage
 * Battery charge controller - fuel gauge via I2C

## Backplane modules
General purpose or application specific, simple power routing board that can be easily developed and soldered.

 * General purpose backplane
   * Up to 2 charging modules
   * Up to 4 output modules
   * One battery protection module
   * One battery monitoring module
   * 6-8x 18650 socket
   * Nodemcu V2 socket
   * SSD1306 display connector

## Connection pinout

In the picture bellow is the diagram of the connector J25 which is a standard header with 2.54 mm pitch and it provides output power and communication pins:

![connection_diagram](/Pics/power_out_connection_diagram.png)

For more information about the board connections please check the [full connection diagram](/Pics/IoT_BP_connectors_pinout.pdf).


## Instructions on using PiRA battery pack

1. Install 18650 cells (note all must have the same voltage upon installation) or connect an
external battery pack. Optionally connect the I2C display. 
2. Press the "Activate battery" button to activate battery pack.
3. Upon activation the battery pack with the processor is active.
4. After about 60s the SSID: pira-battery-pack_1 Password: configesp will be available for you to
connect.
5. Connect and visit http://192.168.4.1 with your browser.
6. In "Config" tab enter your WiFi SSID and Password. Save changes and go to Tools -> Connect. If
settings are correct the battery pack will be connected to the WiFi network.
7. If the WiFi network is unavailable, the above SSID will appear again.

---

#### License

All our projects are as usefully open-source as possible.

Hardware including documentation is licensed under [CERN OHL v.1.2. license](http://www.ohwr.org/licenses/cern-ohl/v1.2)

Firmware and software originating from the project is licensed under [GNU GENERAL PUBLIC LICENSE v3](http://www.gnu.org/licenses/gpl-3.0.en.html).

Open data generated by our projects is licensed under [CC0](https://creativecommons.org/publicdomain/zero/1.0/legalcode).

All our websites and additional documentation are licensed under [Creative Commons Attribution-ShareAlike 4 .0 Unported License](https://creativecommons.org/licenses/by-sa/4.0/legalcode).

What this means is that you can use hardware, firmware, software and documentation without paying a royalty and knowing that you'll be able to use your version forever. You are also free to make changes but if you share these changes then you have to do so on the same conditions that you enjoy.

Koruza, GoodEnoughCNC and IRNAS are all names and marks of Institut IRNAS Raƒçe. 
You may use these names and terms only to attribute the appropriate entity as required by the Open Licences referred to above. You may not use them in any other way and in particular you may not use them to imply endorsement or authorization of any hardware that you design, make or sell.
